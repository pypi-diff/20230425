# Comparing `tmp/JoUtil-1.0.8-py3-none-any.whl.zip` & `tmp/JoUtil-1.2.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,78 +1,85 @@
-Zip file size: 10368763 bytes, number of entries: 95
+Zip file size: 10384149 bytes, number of entries: 104
 -rw-rw-rw-  2.0 fat      235 b- defN 20-Sep-22 08:54 JoTools/__init__.py
--rw-rw-rw-  2.0 fat    37262 b- defN 22-May-19 07:29 JoTools/operateDeteRes.py
+-rw-rw-rw-  2.0 fat    40994 b- defN 23-Apr-25 10:44 JoTools/operateDeteRes.py
 -rw-rw-rw-  2.0 fat     9076 b- defN 21-Dec-14 11:48 JoTools/for_csdn/find_same_img/find_same_img.py
 -rw-rw-rw-  2.0 fat     1787 b- defN 21-Jul-21 09:11 JoTools/for_csdn/the_art_of_war/the_art_of_war.py
 -rw-rw-rw-  2.0 fat    22538 b- defN 21-Jul-21 09:11 JoTools/for_csdn/the_art_of_war/data/the_art_of_war.txt
 -rw-rw-rw-  2.0 fat    22837 b- defN 21-Jul-29 01:31 JoTools/for_csdn/the_art_of_war/data/the_art_of_war_line.txt
+-rw-rw-rw-  2.0 fat     1497 b- defN 22-Aug-22 10:30 JoTools/for_csdn/word_pic/ucd_say.py
 -rw-rw-rw-  2.0 fat     9141 b- defN 22-Mar-15 11:01 JoTools/for_csdn/word_pic/word_pic.py
 -rw-rw-rw-  2.0 fat 14297050 b- defN 21-Jul-21 09:11 JoTools/for_csdn/word_pic/data/del.pkl
 -rw-rw-rw-  2.0 fat  2532753 b- defN 21-Jul-21 09:11 JoTools/for_csdn/word_pic/data/word_analysis.pkl
 -rw-rw-rw-  2.0 fat  2552571 b- defN 21-Jul-21 09:11 JoTools/for_csdn/word_pic/data/word_analysis_2.pkl
+-rw-rw-rw-  2.0 fat       52 b- defN 23-Apr-25 10:46 JoTools/ml/__init__.py
+-rw-rw-rw-  2.0 fat    10072 b- defN 23-Apr-25 10:44 JoTools/ml/deteOnnx.py
 -rw-rw-rw-  2.0 fat       52 b- defN 21-Jul-21 09:11 JoTools/txkj/__init__.py
 -rw-rw-rw-  2.0 fat     6430 b- defN 22-Apr-12 06:31 JoTools/txkj/autoPS.py
 -rw-rw-rw-  2.0 fat      157 b- defN 21-Jul-21 09:11 JoTools/txkj/calMap.py
 -rw-rw-rw-  2.0 fat    13469 b- defN 21-Jul-21 09:11 JoTools/txkj/calModelAcc.py
 -rw-rw-rw-  2.0 fat     4371 b- defN 21-Jul-21 09:11 JoTools/txkj/configUtil.py
--rw-rw-rw-  2.0 fat     2279 b- defN 21-Aug-21 08:31 JoTools/txkj/driveCudaTorch.py
+-rw-rw-rw-  2.0 fat     1131 b- defN 23-Feb-07 08:48 JoTools/txkj/draw_chart.py
+-rw-rw-rw-  2.0 fat     2419 b- defN 22-Aug-31 02:51 JoTools/txkj/driveCudaTorch.py
 -rw-rw-rw-  2.0 fat    15930 b- defN 21-Jul-21 09:11 JoTools/txkj/eagleUtil.py
 -rw-rw-rw-  2.0 fat    13917 b- defN 21-Jul-21 09:11 JoTools/txkj/efficientDetDataset.py
 -rw-rw-rw-  2.0 fat    10313 b- defN 22-Feb-23 07:09 JoTools/txkj/encryptFile.py
 -rw-rw-rw-  2.0 fat     9671 b- defN 22-Mar-07 02:20 JoTools/txkj/encryptionModels.py
 -rw-rw-rw-  2.0 fat     3076 b- defN 22-May-19 07:24 JoTools/txkj/fackImg.py
 -rw-rw-rw-  2.0 fat    12689 b- defN 21-Jul-21 09:11 JoTools/txkj/findLinesFromPoints.py
 -rw-rw-rw-  2.0 fat     8398 b- defN 21-Jul-21 09:11 JoTools/txkj/imageAugmentation.py
+-rw-rw-rw-  2.0 fat     9410 b- defN 22-Jun-27 02:19 JoTools/txkj/jsonInfo.py
 -rw-rw-rw-  2.0 fat     6552 b- defN 21-Jul-21 09:11 JoTools/txkj/parseXml.py
 -rw-rw-rw-  2.0 fat     7343 b- defN 21-Jul-21 09:11 JoTools/txkj/segmentAndRegroup.py
+-rw-rw-rw-  2.0 fat     6726 b- defN 22-Jun-08 09:39 JoTools/txkj/ucDatasetOpt.py
+-rw-rw-rw-  2.0 fat     5410 b- defN 22-Aug-15 06:00 JoTools/txkj/ucDatasetUtil.py
 -rw-rw-rw-  2.0 fat     7446 b- defN 22-Jun-08 08:46 JoTools/txkj/ucGenerator.py
--rw-rw-rw-  2.0 fat      150 b- defN 21-Dec-08 07:14 JoTools/txkj/xml_to_yolo.py
+-rw-rw-rw-  2.0 fat      628 b- defN 23-Apr-01 09:19 JoTools/txkj/xml_to_yolo.py
 -rw-rw-rw-  2.0 fat    11730 b- defN 21-Dec-18 07:07 JoTools/txkjRes/AllRes.py
 -rw-rw-rw-  2.0 fat      353 b- defN 21-Jul-21 09:11 JoTools/txkjRes/__init__.py
 -rw-rw-rw-  2.0 fat      447 b- defN 22-Mar-26 01:28 JoTools/txkjRes/configOpt.py
 -rw-rw-rw-  2.0 fat     5952 b- defN 22-Mar-03 06:08 JoTools/txkjRes/deteAngleObj.py
 -rw-rw-rw-  2.0 fat    13235 b- defN 22-Apr-21 08:44 JoTools/txkjRes/deteObj.py
--rw-rw-rw-  2.0 fat    75787 b- defN 22-Jun-15 07:51 JoTools/txkjRes/deteRes.py
+-rw-rw-rw-  2.0 fat    79275 b- defN 23-Apr-25 08:29 JoTools/txkjRes/deteRes.py
 -rw-rw-rw-  2.0 fat     7181 b- defN 21-Jul-21 09:11 JoTools/txkjRes/deteSegmentObj.py
--rw-rw-rw-  2.0 fat    12956 b- defN 22-Apr-12 06:57 JoTools/txkjRes/deteXml.py
+-rw-rw-rw-  2.0 fat    13005 b- defN 23-Feb-25 05:54 JoTools/txkjRes/deteXml.py
 -rw-rw-rw-  2.0 fat      151 b- defN 21-Dec-15 02:21 JoTools/txkjRes/lineRes.py
 -rw-rw-rw-  2.0 fat     2523 b- defN 22-Jan-05 07:36 JoTools/txkjRes/parseJson.py
 -rw-rw-rw-  2.0 fat    10124 b- defN 22-Jan-04 06:12 JoTools/txkjRes/pointRes.py
 -rw-rw-rw-  2.0 fat       99 b- defN 21-Dec-15 01:50 JoTools/txkjRes/pointXml.py
 -rw-rw-rw-  2.0 fat     4077 b- defN 22-Jan-07 06:05 JoTools/txkjRes/resBase.py
--rw-rw-rw-  2.0 fat     5400 b- defN 22-Apr-21 11:10 JoTools/txkjRes/resTools.py
+-rw-rw-rw-  2.0 fat     6830 b- defN 23-Apr-25 02:18 JoTools/txkjRes/resTools.py
 -rw-rw-rw-  2.0 fat     1976 b- defN 21-Dec-15 02:44 JoTools/txkjRes/segmentObj.py
 -rw-rw-rw-  2.0 fat    12761 b- defN 22-Apr-12 06:43 JoTools/txkjRes/segmentRes.py
 -rw-rw-rw-  2.0 fat      809 b- defN 21-Jul-21 09:11 JoTools/utils/ArgparseUtil.py
 -rw-rw-rw-  2.0 fat      883 b- defN 21-Jul-21 09:11 JoTools/utils/BisectUtil.py
--rw-rw-rw-  2.0 fat     3863 b- defN 22-May-09 12:28 JoTools/utils/BlockUtil.py
+-rw-rw-rw-  2.0 fat     4063 b- defN 22-Sep-28 06:11 JoTools/utils/BlockUtil.py
 -rw-rw-rw-  2.0 fat     4623 b- defN 21-Dec-09 01:35 JoTools/utils/BytesUtil.py
 -rw-rw-rw-  2.0 fat    10489 b- defN 21-Jul-21 09:11 JoTools/utils/CompileUtil.py
 -rw-rw-rw-  2.0 fat     4112 b- defN 22-Jun-28 10:42 JoTools/utils/CompressFolderUtil.py
 -rw-rw-rw-  2.0 fat      877 b- defN 21-Sep-16 11:06 JoTools/utils/ContextManagerUtil.py
 -rw-rw-rw-  2.0 fat     1489 b- defN 22-Jan-25 08:16 JoTools/utils/CsvUtil.py
 -rw-rw-rw-  2.0 fat      593 b- defN 21-Jul-21 09:11 JoTools/utils/CtypeUtil.py
 -rw-rw-rw-  2.0 fat     5791 b- defN 22-Feb-22 03:30 JoTools/utils/DecoratorUtil.py
 -rw-rw-rw-  2.0 fat     2311 b- defN 21-Jul-21 09:11 JoTools/utils/DestructUtil.py
 -rw-rw-rw-  2.0 fat     1196 b- defN 21-Dec-14 07:21 JoTools/utils/EncryptUtil.py
 -rw-rw-rw-  2.0 fat      587 b- defN 22-Mar-26 02:15 JoTools/utils/ExternalCommandUtil.py
 -rw-rw-rw-  2.0 fat     4227 b- defN 21-Jul-21 09:11 JoTools/utils/FTPUtil.py
--rw-rw-rw-  2.0 fat    12647 b- defN 22-May-23 07:19 JoTools/utils/FileOperationUtil.py
+-rw-rw-rw-  2.0 fat    12602 b- defN 23-Mar-30 10:54 JoTools/utils/FileOperationUtil.py
 -rw-rw-rw-  2.0 fat     1014 b- defN 22-Feb-11 07:30 JoTools/utils/FrameCal.py
 -rw-rw-rw-  2.0 fat     3116 b- defN 21-Oct-14 02:26 JoTools/utils/GifUtil.py
 -rw-rw-rw-  2.0 fat     1201 b- defN 21-Jul-22 02:02 JoTools/utils/GitUtil.py
 -rw-rw-rw-  2.0 fat     6041 b- defN 21-Jul-21 09:11 JoTools/utils/HashImageUtil.py
--rw-rw-rw-  2.0 fat     8212 b- defN 22-Feb-18 03:41 JoTools/utils/HashlibUtil.py
+-rw-rw-rw-  2.0 fat     8228 b- defN 22-Dec-06 03:52 JoTools/utils/HashlibUtil.py
 -rw-rw-rw-  2.0 fat     1474 b- defN 21-Jul-21 09:11 JoTools/utils/ImageMetadataUtil.py
 -rw-rw-rw-  2.0 fat    12328 b- defN 21-Jul-21 09:11 JoTools/utils/ImageProcessingUtil.py
 -rw-rw-rw-  2.0 fat    24558 b- defN 21-Jul-21 09:11 JoTools/utils/ImageUtil.py
 -rw-rw-rw-  2.0 fat     4345 b- defN 22-Mar-16 08:47 JoTools/utils/InterpolateUtil.py
 -rw-rw-rw-  2.0 fat      272 b- defN 21-Jul-21 09:11 JoTools/utils/InterpolationUtil.py
 -rw-rw-rw-  2.0 fat     1158 b- defN 21-Jul-30 02:29 JoTools/utils/JsonUtil.py
--rw-rw-rw-  2.0 fat     2444 b- defN 22-Jan-12 07:40 JoTools/utils/LivpUtil.py
+-rw-rw-rw-  2.0 fat     2455 b- defN 22-Dec-26 00:45 JoTools/utils/LivpUtil.py
 -rw-rw-rw-  2.0 fat     1664 b- defN 22-Feb-25 02:47 JoTools/utils/LogUtil.py
 -rw-rw-rw-  2.0 fat     1773 b- defN 21-Jul-21 09:11 JoTools/utils/LyricsUtil.py
 -rw-rw-rw-  2.0 fat      857 b- defN 21-Jul-22 02:15 JoTools/utils/MarkDownUtil.py
 -rw-rw-rw-  2.0 fat     5003 b- defN 21-Jul-21 09:11 JoTools/utils/MySqlUtil.py
 -rw-rw-rw-  2.0 fat      827 b- defN 21-Jul-21 09:11 JoTools/utils/NumberUtil.py
 -rw-rw-rw-  2.0 fat     1606 b- defN 21-Jul-21 09:11 JoTools/utils/OCRUtil.py
 -rw-rw-rw-  2.0 fat      664 b- defN 21-Jul-21 09:11 JoTools/utils/PickleUtil.py
@@ -81,17 +88,19 @@
 -rw-rw-rw-  2.0 fat     1783 b- defN 22-May-23 06:14 JoTools/utils/PrintUtil.py
 -rw-rw-rw-  2.0 fat     1112 b- defN 21-Jul-21 09:11 JoTools/utils/PropertiesUtil.py
 -rw-rw-rw-  2.0 fat     1470 b- defN 21-Sep-02 02:56 JoTools/utils/RandomUtil.py
 -rw-rw-rw-  2.0 fat     1504 b- defN 22-Jun-07 09:36 JoTools/utils/RedisUtil.py
 -rw-rw-rw-  2.0 fat     2625 b- defN 21-Aug-21 03:59 JoTools/utils/ScrapyUtil.py
 -rw-rw-rw-  2.0 fat     1917 b- defN 21-Jul-21 09:11 JoTools/utils/SplitUtil.py
 -rw-rw-rw-  2.0 fat     2198 b- defN 22-Apr-28 01:58 JoTools/utils/StrUtil.py
--rw-rw-rw-  2.0 fat     1978 b- defN 22-Jan-25 07:29 JoTools/utils/TxtUtil.py
+-rw-rw-rw-  2.0 fat     1119 b- defN 23-Apr-24 07:26 JoTools/utils/TimeUtil.py
+-rw-rw-rw-  2.0 fat     1976 b- defN 22-Oct-22 02:20 JoTools/utils/TxtUtil.py
 -rw-rw-rw-  2.0 fat     7922 b- defN 21-Dec-09 02:06 JoTools/utils/VideoUtilCV.py
 -rw-rw-rw-  2.0 fat     5034 b- defN 22-Feb-23 07:36 JoTools/utils/XmlUtil.py
+-rw-rw-rw-  2.0 fat      405 b- defN 22-Sep-16 03:58 JoTools/utils/YamlUtil.py
 -rw-rw-rw-  2.0 fat     2614 b- defN 21-Jul-21 09:11 JoTools/utils/ZipUtil.py
 -rw-rw-rw-  2.0 fat       52 b- defN 20-Sep-22 11:05 JoTools/utils/__init__.py
--rw-rw-rw-  2.0 fat      661 b- defN 22-Jun-28 10:48 JoUtil-1.0.8.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 22-Jun-28 10:48 JoUtil-1.0.8.dist-info/WHEEL
--rw-rw-rw-  2.0 fat      157 b- defN 22-Jun-28 10:48 JoUtil-1.0.8.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     8159 b- defN 22-Jun-28 10:48 JoUtil-1.0.8.dist-info/RECORD
-95 files, 19952226 bytes uncompressed, 10355931 bytes compressed:  48.1%
+-rw-rw-rw-  2.0 fat      679 b- defN 23-Apr-25 10:51 JoUtil-1.2.1.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Apr-25 10:51 JoUtil-1.2.1.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat      168 b- defN 23-Apr-25 10:51 JoUtil-1.2.1.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat     8907 b- defN 23-Apr-25 10:51 JoUtil-1.2.1.dist-info/RECORD
+104 files, 19998322 bytes uncompressed, 10370159 bytes compressed:  48.1%
```

## zipnote {}

```diff
@@ -12,26 +12,35 @@
 
 Filename: JoTools/for_csdn/the_art_of_war/data/the_art_of_war.txt
 Comment: 
 
 Filename: JoTools/for_csdn/the_art_of_war/data/the_art_of_war_line.txt
 Comment: 
 
+Filename: JoTools/for_csdn/word_pic/ucd_say.py
+Comment: 
+
 Filename: JoTools/for_csdn/word_pic/word_pic.py
 Comment: 
 
 Filename: JoTools/for_csdn/word_pic/data/del.pkl
 Comment: 
 
 Filename: JoTools/for_csdn/word_pic/data/word_analysis.pkl
 Comment: 
 
 Filename: JoTools/for_csdn/word_pic/data/word_analysis_2.pkl
 Comment: 
 
+Filename: JoTools/ml/__init__.py
+Comment: 
+
+Filename: JoTools/ml/deteOnnx.py
+Comment: 
+
 Filename: JoTools/txkj/__init__.py
 Comment: 
 
 Filename: JoTools/txkj/autoPS.py
 Comment: 
 
 Filename: JoTools/txkj/calMap.py
@@ -39,14 +48,17 @@
 
 Filename: JoTools/txkj/calModelAcc.py
 Comment: 
 
 Filename: JoTools/txkj/configUtil.py
 Comment: 
 
+Filename: JoTools/txkj/draw_chart.py
+Comment: 
+
 Filename: JoTools/txkj/driveCudaTorch.py
 Comment: 
 
 Filename: JoTools/txkj/eagleUtil.py
 Comment: 
 
 Filename: JoTools/txkj/efficientDetDataset.py
@@ -63,20 +75,29 @@
 
 Filename: JoTools/txkj/findLinesFromPoints.py
 Comment: 
 
 Filename: JoTools/txkj/imageAugmentation.py
 Comment: 
 
+Filename: JoTools/txkj/jsonInfo.py
+Comment: 
+
 Filename: JoTools/txkj/parseXml.py
 Comment: 
 
 Filename: JoTools/txkj/segmentAndRegroup.py
 Comment: 
 
+Filename: JoTools/txkj/ucDatasetOpt.py
+Comment: 
+
+Filename: JoTools/txkj/ucDatasetUtil.py
+Comment: 
+
 Filename: JoTools/txkj/ucGenerator.py
 Comment: 
 
 Filename: JoTools/txkj/xml_to_yolo.py
 Comment: 
 
 Filename: JoTools/txkjRes/AllRes.py
@@ -252,35 +273,41 @@
 
 Filename: JoTools/utils/SplitUtil.py
 Comment: 
 
 Filename: JoTools/utils/StrUtil.py
 Comment: 
 
+Filename: JoTools/utils/TimeUtil.py
+Comment: 
+
 Filename: JoTools/utils/TxtUtil.py
 Comment: 
 
 Filename: JoTools/utils/VideoUtilCV.py
 Comment: 
 
 Filename: JoTools/utils/XmlUtil.py
 Comment: 
 
+Filename: JoTools/utils/YamlUtil.py
+Comment: 
+
 Filename: JoTools/utils/ZipUtil.py
 Comment: 
 
 Filename: JoTools/utils/__init__.py
 Comment: 
 
-Filename: JoUtil-1.0.8.dist-info/METADATA
+Filename: JoUtil-1.2.1.dist-info/METADATA
 Comment: 
 
-Filename: JoUtil-1.0.8.dist-info/WHEEL
+Filename: JoUtil-1.2.1.dist-info/WHEEL
 Comment: 
 
-Filename: JoUtil-1.0.8.dist-info/top_level.txt
+Filename: JoUtil-1.2.1.dist-info/top_level.txt
 Comment: 
 
-Filename: JoUtil-1.0.8.dist-info/RECORD
+Filename: JoUtil-1.2.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## JoTools/operateDeteRes.py

```diff
@@ -1,14 +1,15 @@
 # -*- coding: utf-8  -*-
 # -*- author: jokker -*-
 
 import os
 import cv2
 import random
 import collections
+from collections import Counter
 import numpy as np
 import prettytable
 from .txkjRes.deteRes import DeteRes
 from .txkjRes.deteAngleObj import DeteAngleObj
 from .txkjRes.deteObj import DeteObj
 from .utils.DecoratorUtil import DecoratorUtil
 from .utils.FileOperationUtil import FileOperationUtil
@@ -18,14 +19,15 @@
 from .txkjRes.deteObj import DeteObj
 from .utils.StrUtil import StrUtil
 import prettytable as pt
 from multiprocessing import Pool
 from functools import partial
 from .txkj.imageAugmentation import ImageAugmentation
 
+
 # todo 重写 OperateDeteRes 中的函数，很多函数功能的实现已经移植到 DeteRes 类中了，使用调用里面的方法比较好
 
 
 class DeteAcc(object):
     """检测结果验证相关函数"""
 
     def __init__(self):
@@ -109,15 +111,15 @@
             return check_dict
 
         # 重置目标框
         dete_res_standard.reset_alarms(check_res)
 
         # 保存图片
         if save_img:
-            dete_res_standard.img_path = assign_img_path
+            dete_res_standard.imgPath = assign_img_path
             dete_res_standard.draw_dete_res(save_path, color_dict=self.color_dict)
         # 保存 xml
         if save_xml:
             save_xml_path = save_path[:-4] + '.xml'
             dete_res_standard.save_to_xml(save_xml_path)
         return check_dict
 
@@ -174,14 +176,17 @@
 
         return check_res
         # return self.cal_acc_rec(check_res)
 
     @staticmethod
     def cal_acc_rec(check_res, tag_list=None):
         """根据结果得到正确率和召回率"""
+
+        # todo 返回总体的召回率和精确率，而不是某一个标签的
+
         res = {}
         extra_dict, miss_dict, correct_dict, mistake_dict = {}, {}, {}, {}
         # 获得字典
         for each_key in check_res:
             if str(each_key).startswith('extra_'):
                 new_key = each_key[len('extra_'):]
                 extra_dict[new_key] = check_res[each_key]
@@ -315,14 +320,98 @@
                     # print(mistake_str, len(res_dict[mistake_str]))
                     mistake_tb.add_row([i, j, len(res_dict[mistake_str])])
 
         print(tb)
         print(mistake_tb)
         return return_res
 
+    @staticmethod
+    def compare_customer_and_standard_mul_classify(standard, customized):
+        """对比一张多标签的标准结果和测试结果"""
+        dete_res_s = DeteRes(xml_path=standard)
+        dete_res_c = DeteRes(xml_path=customized)
+
+        standard_tags = set()
+        customized_tags = set()
+        for each_obj in dete_res_s:
+            standard_tags.add(each_obj.tag)
+
+        for each_obj in dete_res_c:
+            customized_tags.add(each_obj.tag)
+
+        miss_list = []
+        extra_list = []
+        correct_list = []
+
+        for each_tag in standard_tags:
+            if each_tag in customized_tags:
+                correct_list.append(each_tag)
+            else:
+                miss_list.append(each_tag)
+
+        for each_tag in customized_tags:
+            if each_tag not in standard_tags:
+                extra_list.append(each_tag)
+
+        check_dict = {'correct': correct_list, 'extra': extra_list, 'miss': miss_list}
+        return check_dict
+
+    @staticmethod
+    def cal_model_acc_mul_classify(standard_dir, customized_dir):
+        check_res = {'correct':[], 'miss':[], 'extra':[]}
+        for each_xml_path in FileOperationUtil.re_all_file(standard_dir, endswitch=['.xml']):
+            xml_name = os.path.split(each_xml_path)[1]
+            customized_xml_path = os.path.join(customized_dir, xml_name)
+            if os.path.exists(customized_xml_path):
+                each_check_res = DeteAcc.compare_customer_and_standard_mul_classify(each_xml_path, customized_xml_path)
+                for each in each_check_res:
+                    check_res[each].extend(each_check_res[each])
+
+        check_res['correct'] = Counter(check_res['correct'])
+        check_res['miss'] = Counter(check_res['miss'])
+        check_res['extra'] = Counter(check_res['extra'])
+
+        return check_res
+
+    @staticmethod
+    def cal_acc_rec_mul_classify(check_res, tag_list):
+        """计算多标签的精确率和召回率"""
+        res = {}
+
+        correct = check_res['correct']
+        miss = check_res['miss']
+        extra = check_res['extra']
+
+        for each_tag in tag_list:
+            if (correct[each_tag] + extra[each_tag]) == 0:
+                res[f'acc_{each_tag}'] = -1
+            else:
+                res[f'acc_{each_tag}'] = correct[each_tag] / (correct[each_tag] + extra[each_tag])
+
+            if (correct[each_tag] + miss[each_tag]) == 0:
+                res[f'rec_{each_tag}'] = -1
+            else:
+                res[f'rec_{each_tag}'] = correct[each_tag] / (correct[each_tag] + miss[each_tag])
+
+        correct_sum = sum(correct.values())
+        miss_sum = sum(miss.values())
+        extra_sum = sum(extra.values())
+
+        if (correct_sum + extra_sum) == 0:
+            res['acc_all'] = -1
+        else:
+            res['acc_all'] = correct_sum / (correct_sum + extra_sum)
+
+        if (correct_sum + miss_sum) == 0:
+            res['res_all'] = -1
+        else:
+            res['res_all'] = correct_sum / (correct_sum + miss_sum)
+
+        return res
+
 
 class OperateDeteRes(object):
     """基于 DeteRes 的批量数据操作"""
 
     @staticmethod
     def filter_by_area_ratio(xml_dir, area_ratio_threshold=0.0006, save_dir=None):
         """根据面积比例阈值进行筛选"""
@@ -410,34 +499,43 @@
         if save_xml_dir is None:
             save_xml_dir = region_img_dir
 
         dete_res_dict = {}
         # 小截图信息获取
         for each_xml_path in FileOperationUtil.re_all_file(crop_dir, lambda x: str(x).endswith('.jpg')):
             each_img_dir, img_name, _ = FileOperationUtil.bang_path(each_xml_path)
-            region_img_name = img_name.split('-+-')[0]
-            img_name = img_name.split('-+-')[-1]
+
+            if img_name.count('-+-') == 1:
+                region_img_name = img_name.split('-+-')[0]
+                img_name = img_name.split('-+-')[-1]
+            elif img_name.count('-+-') > 1:
+                region_img_name = "-+-".join(img_name.split('-+-')[:-1])
+                img_name = img_name.split('-+-')[-1]
+            else:
+                raise ValueError("img_name need -+- : ", img_name)
             # 现在的标签
             each_tag = each_img_dir[len(crop_dir) + 1:]
             # 构造新的 deteObj 实例
             a = DeteObj()
             a.load_from_name_str(img_name)
             a.tag = each_tag
 
             if region_img_name in dete_res_dict:
                 dete_res_dict[region_img_name].append(a)
             else:
                 dete_res_dict[region_img_name] = [a]
 
         # 将小图信息合并为大图
         for each_img_name in dete_res_dict:
+            # todo 这边指定只能使用 .jpg 文件
             region_img_path = os.path.join(region_img_dir, "{0}.jpg".format(each_img_name))
 
             # 去除找不到文件
             if not os.path.exists(region_img_path):
+                print("找不到图片路径 : ", region_img_path)
                 continue
 
             # 保存文件
             a = DeteRes(assign_img_path=region_img_path)
             a.reset_alarms(dete_res_dict[each_img_name])
             xml_path = os.path.join(save_xml_dir, "{0}.xml".format(each_img_name))
             a.refresh_obj_id()
@@ -552,15 +650,17 @@
             a.img_path = each_img_path
 
             a.crop_angle_dete_obj(save_dir, split_by_tag=split_by_tag, exclude_tag_list=exclude_tag_list, augment_parameter=augment_parameter)
             index += 1
 
     # ------------------------------------------------------------------------------------------------------------------
 
+    # @DecoratorUtil.time_this
     @staticmethod
+    @DecoratorUtil.time_this
     def get_class_count(xml_folder, print_count=False, filter_func=None):
         """查看 voc xml 的标签"""
         xml_info, name_dict = [], {}
         error_file = 0
         # 遍历 xml 统计 xml 信息
         xml_list = list(FileOperationUtil.re_all_file(xml_folder, lambda x: str(x).endswith('.xml')))
         #
```

## JoTools/txkj/driveCudaTorch.py

```diff
@@ -1,13 +1,14 @@
 # -*- coding: utf-8  -*-
 # -*- author: jokker -*-
 
 
 from JoTools.utils.ScrapyUtil import ScrapyUtil
 
+# Linux下PyTorch、CUDA Toolkit 及显卡驱动版本对应关系 refer : https://blog.csdn.net/weixin_42069606/article/details/105198845
 
 # todo torch | cuda | drive | python 之间的关系
     # 检测模型代码能否运行取决于 （1）python 版本 （2）torch 版本
     # torch 版本取决于 cuda 版本
     # cuda 版本取决于 NVIDIA drive 版本
 
 # todo drive    下载 | 安装 | 查看
@@ -23,15 +24,15 @@
     # 安装 https://zhuanlan.zhihu.com/p/112138261
     # 查看 nvidia-smi
     # 配置
         # sudo vim ~/.bashrc
         # 如果有其他版本的 cuda，注释相关的代码
         # 添加下面两行预计
         # export PATH="/usr/local/cuda-10.1/bin:$PATH"
-        # export LD_LIBRARY_PATH="/usr/lcoal/cuda-10.1/lib64:$LD_LIBRARY_PATH"
+        # export LD_LIBRARY_PATH="/usr/local/cuda-10.1/lib64:$LD_LIBRARY_PATH"
         # 保存关闭后source文件使配置生效：
         # source ~/.bashrc
 
 # todo torch    下载 | 安装 | 查看
     # 下载 https://download.pytorch.org/whl/torch_stable.html
     # 安装 pip install *.whl
     # 查看 pip list
```

## JoTools/txkj/xml_to_yolo.py

```diff
@@ -1,5 +1,33 @@
 # -*- coding: utf-8  -*-
 # -*- author: jokker -*-
 
-# 直接将 xml 转为 yolo 的格式（1）分训练集和验证集 （2）转为 txt 格式
-#
+
+import os
+from JoTools.txkjRes.deteRes import DeteRes
+from JoTools.utils.FileOperationUtil import FileOperationUtil
+
+xml_dir = r"C:\Users\14271\Desktop\result_xml"
+res_dir = r"C:\Users\14271\Desktop\txt_dir"
+
+index = 0
+for each_xml_path in FileOperationUtil.re_all_file(xml_dir, endswitch=[".xml"]):
+    index += 1
+    print(index, each_xml_path)
+    dete_res = DeteRes(each_xml_path)
+    each_txt_path = os.path.join(res_dir, FileOperationUtil.bang_path(each_xml_path)[1] + ".txt")
+    dete_res.save_to_yolo_txt(each_txt_path)
+
+
+
+
+
+
+
+
+
+
+
+
+
+
+
```

### encoding

```diff
@@ -1 +1 @@
-utf-8
+us-ascii
```

## JoTools/txkjRes/deteRes.py

```diff
@@ -2,27 +2,31 @@
 # -*- author: jokker -*-
 import math
 import os
 import cv2
 import copy
 import time
 import random
+from PIL.Image import Image
+import matplotlib.pyplot as plt
+import numpy
 from flask import jsonify
 import numpy as np
 from abc import ABC
 from PIL import Image
 from .resBase import ResBase
 from .deteObj import DeteObj
 from .deteAngleObj import DeteAngleObj
 from ..txkjRes.resTools import ResTools
 from ..utils.JsonUtil import JsonUtil
-from ..txkjRes.deteXml import parse_xml, save_to_xml, save_to_xml_wh_format
+from ..txkjRes.deteXml import parse_xml, save_to_xml, save_to_xml_wh_format,parse_xml_as_txt
 from ..utils.FileOperationUtil import FileOperationUtil
 from ..utils.DecoratorUtil import DecoratorUtil
 
+
 """
 '__abstractmethods__',
  '__contains__',
  '__getitem__',
  '__init__',
  '__len__',
  '__setattr__',
@@ -177,14 +181,15 @@
         # 设置 @property 属性，只能获取，不能赋值
         # return sorted(self._alarms, key=lambda x:x.id)
         return self._alarms
 
     def _parse_xml_info(self):
         """解析 xml 中存储的检测结果"""
         xml_info = parse_xml(self.xml_path)
+        # xml_info = parse_xml_as_txt(self.xml_path)
         #
         if 'size' in xml_info:
             if 'height' in xml_info['size']:
                 self.height = float(xml_info['size']['height'])
             if 'width' in xml_info['size']:
                 self.width = float(xml_info['size']['width'])
         #
@@ -383,14 +388,29 @@
         return json_dict
 
     def save_to_txt(self, txt_path):
         """label img 中会将标注信息转为 txt 进行保存"""
         # todo 会生成两个文件 （1）classes.txt 存放类别信息 （2）文件名.txt 存放标注信息，tag mx my w h , mx my 为中心点坐标
         pass
 
+    def save_to_yolo_txt(self, txt_path):
+        # 没有结果生成空的 txt
+        if not (self.width > 0 and self.height > 0):
+            raise ValueError("need self.width and self.height")
+
+        with open(txt_path, "w") as txt_file:
+            for obj in self._alarms:
+                w_r = (obj.x2 - obj.x1)/self.width
+                h_r = (obj.y2 - obj.y1)/self.height
+                cx = (obj.x1 + (obj.x2 - obj.x1) * 0.5) / self.width
+                cy = (obj.y1 + (obj.y2 - obj.y1) * 0.5) / self.height
+                label = obj.tag
+                txt_file.write("{0} {1} {2} {3} {4}".format(label, cx, cy, w_r, h_r))
+                txt_file.write("\n")
+
     # @DecoratorUtil.time_this
     def crop_dete_obj(self, save_dir, augment_parameter=None, method=None, exclude_tag_list=None, split_by_tag=False, include_tag_list=None, assign_img_name=None, save_augment=False):
         """将指定的类型的结果进行保存，可以只保存指定的类型，命名使用标准化的名字 fine_name + tag + index, 可指定是否对结果进行重采样，或做特定的转换，只要传入转换函数
         * augment_parameter = [0.5, 0.5, 0.2, 0.2]
         """
 
         # todo save_augment，xml 中的位置是否进行扩展
@@ -771,35 +791,37 @@
         if color_dict is None:
             color_dict = {}
         # 拿到 GBR 的图像
         if not assign_img is None:
             img = assign_img
             img = cv2.cvtColor(img, cv2.COLOR_RGB2BGR)
         else:
-            if self.img is not None:
+            if isinstance(self.img_ndarry, np.ndarray):
+                img = self.img_ndarry
+            elif self.img is not None:
                 img = np.array(self.img)
                 img = cv2.cvtColor(img, cv2.COLOR_RGB2BGR)
             elif self.img_path:
                 img = cv2.imdecode(np.fromfile(self.img_path, dtype=np.uint8), 1)
             else:
-                raise ValueError('need self.img or self.img_path')
+                raise ValueError('need self.img or self.img_path or self.img_ndarry')
         #
         for each_res in self._alarms:
             #
             if isinstance(each_res.tag, int) or isinstance(each_res, float):
                 raise ValueError("tag should not be int or float")
             #
             if each_res.tag in color_dict:
                 each_color = color_dict[each_res.tag]
             else:
                 each_color = [random.randint(0, 255), random.randint(0,255), random.randint(0, 255)]
                 color_dict[each_res.tag] = each_color
 
             tl = line_thickness or int(round(0.001 * max(img.shape[0:2])))      # line thickness
-            tf = max(tl - 2, 1)                                                 # font thickness
+            tf = max(tl - 2, 2)                                                 # font thickness
             #
             s_size = cv2.getTextSize(str('{:.0%}'.format(float(each_res.conf))), 0, fontScale=float(tl) / 3, thickness=tf)[0]
             t_size = cv2.getTextSize(each_res.tag, 0, fontScale=float(tl) / 3, thickness=tf)[0]
 
             if isinstance(each_res, DeteObj):
                 c1, c2 =(each_res.x1, each_res.y1), (each_res.x2, each_res.y2)
                 c2 = c1[0] + t_size[0] + s_size[0] + 15, c1[1] - t_size[1] - 3
@@ -822,14 +844,33 @@
                 # cv2.fillPoly(img, [pts], color=[0,0,255])
 
         # 保存图片，解决保存中文乱码问题
         if save_path is not None:
             cv2.imencode('.jpg', img)[1].tofile(save_path)
         return img
 
+    def show_dete_res(self, color_dict, assign_img=None):
+
+        if isinstance(assign_img, np.ndarray):
+            bg = assign_img
+        else:
+            bg = np.array(np.ones([int(self.height), int(self.width), 3]), dtype=np.int8) * 255
+
+        for obj in self._alarms:
+            if obj.tag in color_dict:
+                each_color = color_dict[obj.tag]
+            else:
+                each_color = [125,125,125]
+
+            cv2.rectangle(bg, (obj.x1, obj.y1), (obj.x2, obj.y2), color=each_color, thickness=3)
+
+        plt.imshow(bg)
+        plt.show()
+
+
     def do_func(self, assign_func):
         """对所有元素进行指定操作"""
         for each_dete_obj in self._alarms:
             assign_func(each_dete_obj)
 
     def do_nms(self, threshold=0.1, ignore_tag=False):
         """对结果做 nms 处理，"""
@@ -1041,14 +1082,48 @@
         threshold = -1
         obj_area_list.sort(reverse=True)
         if nn < len(obj_area_list):
             threshold = np.average(obj_area_list[:nn]) / 2
         # filter by area
         return self.filter_by_area(threshold, update=update)
 
+    def filter_by_same_tag_choose_big(self, iou_th=0.9, assign_tag=None, update=True):
+        # 相同标签，一个检测框包含另外一个检测框就删除被包含的检测框
+        dete_res_temp = self.deep_copy(copy_img=False)
+        dete_res_temp.reset_alarms()
+
+        count_res = self.count_tags()
+        delete_obj_set = set()
+        for each_tag in count_res.keys():
+            if (assign_tag is None) or (each_tag in assign_tag):
+                each_dete_res = self.filter_by_tags(need_tag=[each_tag], update=False)
+                for each_obj_1 in each_dete_res:
+                    for each_obj_2 in each_dete_res:
+                        if each_obj_2 != each_obj_1:
+                            iou_1 = ResTools.cal_iou_1(each_obj_1, each_obj_2)
+                            if iou_1 > iou_th:
+                                if each_obj_1.get_area() < each_obj_2.get_area():
+                                    delete_obj_set.add(each_obj_1.get_name_str())
+                                elif each_obj_1.get_area() == each_obj_2.get_area():
+                                    if hash(each_obj_1.get_name_str()) > hash(each_obj_2.get_name_str()):
+                                        delete_obj_set.add(each_obj_2.get_name_str())
+                                    else:
+                                        delete_obj_set.add(each_obj_1.get_name_str())
+                                else:
+                                    delete_obj_set.add(each_obj_2.get_name_str())
+        #
+        for each_obj in self.alarms:
+            if each_obj.get_name_str() not in delete_obj_set:
+                dete_res_temp.add_obj_2(each_obj)
+
+        if update:
+            self._alarms = dete_res_temp.alarms
+
+        return dete_res_temp
+
     def filter_by_attr(self, attr_name, attr_value, update=True):
         """根据属性名进行筛选"""
         new_dete_res = self.deep_copy(copy_img=False)
         new_dete_res.reset_alarms()
         #
         for each_dete_obj in self._alarms:
             if attr_name in each_dete_obj.__dict__:
@@ -1382,15 +1457,19 @@
         xml_save_dir = os.path.join(save_dir, 'Annotations')
         img_save_dir = os.path.join(save_dir, 'JPEGImages')
         xml_save_path = os.path.join(xml_save_dir, save_name + '.xml')
         jpg_save_path = os.path.join(img_save_dir, save_name + '.jpg')
         os.makedirs(xml_save_dir, exist_ok=True)
         os.makedirs(img_save_dir, exist_ok=True)
         #
-        self.save_to_xml(xml_save_path, new_alarms)
+
+        a = self.deep_copy()
+        a.height = assign_range[3] - assign_range[1]
+        a.width = assign_range[2] - assign_range[0]
+        a.save_to_xml(xml_save_path, new_alarms)
 
         # # 保存 jpg
         crop = self.img.crop(assign_range)
         crop.save(jpg_save_path, quality=95)
 
     def count_tags(self):
         """统计标签数"""
```

## JoTools/txkjRes/deteXml.py

```diff
@@ -209,15 +209,16 @@
             elif each_line.startswith('<folder>'):
                 xml_info['folder'] = parse_assign_line(each_line, 'folder')
             elif each_line.startswith('<height>'):
                 xml_info['size']['height'] = float(parse_assign_line(each_line, 'height'))
             elif each_line.startswith('<width>'):
                 xml_info['size']['width'] = float(parse_assign_line(each_line, 'width'))
             elif each_line.startswith('<depth>'):
-                xml_info['size']['depth'] = float(parse_assign_line(each_line, 'depth'))
+                # xml_info['size']['depth'] = float(parse_assign_line(each_line, 'depth'))
+                xml_info['size']['depth'] = 3
             elif each_line.startswith('<path>'):
                 xml_info['path'] = parse_assign_line(each_line, 'path')
             elif each_line.startswith('<segmented>'):
                 xml_info['segmented'] = parse_assign_line(each_line, 'segmented')
             elif each_line.startswith('<source>'):
                 xml_info['source'] = parse_assign_line(each_line, 'source')
             elif each_line.startswith('<object>'):
```

## JoTools/txkjRes/resTools.py

```diff
@@ -59,25 +59,39 @@
         poly_points_list_1 = dete_obj_1.get_points()
         poly_points_list_2 = dete_obj_2.get_points()
         iou = ResTools.polygon_iou(poly_points_list_1, poly_points_list_2)
         return iou
 
     @staticmethod
     def cal_iou_1(dete_obj_1, dete_obj_2, ignore_tag=True):
-        """计算两个矩形框的相交面积，占其中一个矩形框面积的比例 ， """
+        """计算两个矩形框的相交面积，占dete_obj_1矩形框面积的比例 ， """
         if dete_obj_1.tag != dete_obj_2.tag and ignore_tag is False:
             return 0
 
         # 计算两个多边形之间的 iou
         poly_points_list_1 = dete_obj_1.get_points()
         poly_points_list_2 = dete_obj_2.get_points()
         cover_index = ResTools.polygon_iou_1(poly_points_list_1, poly_points_list_2)
         return cover_index
 
     @staticmethod
+    def cal_iou_2(obj_1, obj_2):
+        # FIXME 未测试
+        # box1, box2: 两个矩形的坐标，格式为[x1, y1, x2, y2]
+        x1 = max(obj_1.x1, obj_2.x1)
+        y1 = max(obj_1.y1, obj_2.y1)
+        x2 = min(obj_1.x2, obj_2.x2)
+        y2 = min(obj_1.y2, obj_2.y2)
+        inter_area = max(0, x2 - x1 + 1) * max(0, y2 - y1 + 1)
+        box1_area = (obj_1.x2 - obj_1.x1 + 1) * (obj_1.y2 - obj_1.y1 + 1)
+        box2_area = (obj_2.x2 - obj_2.x1 + 1) * (obj_2.y2 - obj_2.y1 + 1)
+        iou = inter_area / float(box1_area + box2_area - inter_area)
+        return iou
+
+    @staticmethod
     def polygon_iou(poly_points_list_1, poly_points_list_2):
         """计算任意两个凸多边形之间的 IOU"""
         #
         poly1 = Polygon(poly_points_list_1).convex_hull  # 凸多边形
         poly2 = Polygon(poly_points_list_2).convex_hull  # 凸多边形
         poly3 = poly1.intersection(poly2)
         #
@@ -125,14 +139,34 @@
         poly1 = Polygon(ploy_points_list).convex_hull
         #
         if poly1.contains(p1):
             return True
         else:
             return False
 
+    @staticmethod
+    def point_in_polygon(point, polygon):
+        # FIXME 未测试
+        # point: 要判断的点的坐标，格式为[x, y]
+        # polygon: 多边形的顶点坐标，格式为[[x1, y1], [x2, y2], ... [xn, yn]]
+        x, y = point
+        inside = False
+        n = len(polygon)
+        p1x, p1y = polygon[0]
+        for i in range(1, n + 1):
+            p2x, p2y = polygon[i % n]
+            if y > min(p1y, p2y):
+                if y <= max(p1y, p2y):
+                    if x <= max(p1x, p2x):
+                        if p1y != p2y:
+                            xinters = (y - p1y) * (p2x - p1x) / (p2y - p1y) + p1x
+                        if p1x == p2x or x <= xinters:
+                            inside = not inside
+            p1x, p1y = p2x, p2y
+        return inside
 
 
 
 
 
 
 if __name__ == "__main__":
```

## JoTools/utils/BlockUtil.py

```diff
@@ -83,22 +83,26 @@
 
 
 if __name__ == "__main__":
 
     assign_block_x = 5
     assign_block_y = 5
 
-    a = BlockUtil(200, 200, assign_block_x, assign_block_y)
+    a = BlockUtil(20, 20, assign_block_x, assign_block_y)
 
     label_list = [(x, y) for x in range(assign_block_x) for y in range(assign_block_y)]
 
     # a.draw_blocks([(0,0), (0,1), (1,1), (1,0)], augment_parameter=[5,5,5,5])
-    a.draw_blocks([(0,0), (0,1), (1,1), (1,0)])
+    # a.draw_blocks([(0,0), (0,1), (1,1), (1,0)])
 
-    # a.draw_blocks(label_list)
+    a.draw_blocks(label_list, augment_parameter=[0.2,0.2,0.2,0.2])
+
+    for i in range(assign_block_x):
+        for j in range(assign_block_y):
+            print(a.get_block_range(i, j, do_augment=[5,5,5,5], is_relative=False))
```

## JoTools/utils/FileOperationUtil.py

```diff
@@ -74,20 +74,20 @@
             for each in os.listdir(file_path):
                 tmp_file_path = os.path.join(file_path, each)
                 if os.path.isfile(tmp_file_path):
                     if endswitch is not None:
                         _, end_str = os.path.splitext(tmp_file_path)
                         if end_str not in endswitch:
                             continue
+
+                    if func is None:
+                        yield tmp_file_path
                     else:
-                        if func is None:
+                        if func(tmp_file_path):
                             yield tmp_file_path
-                        else:
-                            if func(tmp_file_path):
-                                yield tmp_file_path
         else:
             # 递归，不返回列表
             for i, j, k in os.walk(file_path):
                 for each_file_name in k:
                     # 过滤后缀不符合的路径
                     if endswitch is not None:
                         _, end_str = os.path.splitext(each_file_name)
```

## JoTools/utils/HashlibUtil.py

```diff
@@ -33,15 +33,15 @@
         with open(file_path, 'rb') as xml_file:
             md5.update(xml_file.read())
             return md5.hexdigest()
 
     @staticmethod
     def get_str_md5(assign_str):
         md5 = hashlib.md5()
-        md5.update(assign_str)
+        md5.update(assign_str.encode('utf-8'))
         return md5.hexdigest()
 
     @staticmethod
     def is_the_same_file(file_path_1, file_path_2):
         """判断两个文件是否是一个文件"""
         md5_1 = HashLibUtil.get_file_md5(file_path_1)
         md5_2 = HashLibUtil.get_file_md5(file_path_2)
```

## JoTools/utils/LivpUtil.py

```diff
@@ -50,17 +50,17 @@
         """heic 文件转为 jpg 文件"""
         data = LivpUtil.read_image_file_rb(heic_file_path)
         LivpUtil.decodeImage(data, save_path)
 
 
 if __name__ == "__main__":
 
-    livp_dir = r"C:\Users\14271\Desktop\del\livp\img"
-    temp_folder = r"C:\Users\14271\Desktop\del\livp\tmp"
-    save_folder = r"C:\Users\14271\Desktop\del\livp\res"
+    livp_dir = r"D:\AppData\baiduwangpan\20221015_宜兴出差"
+    temp_folder = r"C:\Users\14271\Desktop\del"
+    save_folder = r"D:\AppData\baiduwangpan\20221015_宜兴出差"
 
 
     for each_name in os.listdir(livp_dir):
         file_path = os.path.join(livp_dir, each_name)
         # 解压为 .heic 文件
         uzip_path = LivpUtil.unzip_to_heic(file_path, temp_folder)
         # 继续解析为 jpg 文件
```

## JoTools/utils/TxtUtil.py

```diff
@@ -6,15 +6,15 @@
 
 class TxtUtil(object):
     """Txt操作"""
 
     @staticmethod
     def read_as_tableread_as_table(txt_path, sep='\t'):
         return_table = []
-        with open(txt_path, 'r', encoding='utf-8') as txt_file:
+        with open(txt_path, 'r', encoding='GBK') as txt_file:
             for each_line in txt_file:
                 line_elements = []
                 for each_element in each_line.split(sep=sep):
                     line_elements.append(each_element.strip('\n'))
                 return_table.append(line_elements)
         return return_table
```

## Comparing `JoUtil-1.0.8.dist-info/METADATA` & `JoUtil-1.2.1.dist-info/METADATA`

 * *Files 25% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: JoUtil
-Version: 1.0.8
+Version: 1.2.1
 Summary: a tools for TXKJ algo
 Home-page: https://github.com/newjokker/JoUtil.git
 Author: jokker
 Author-email: 18761609908@163.com
 License: UNKNOWN
 Platform: UNKNOWN
 Requires: numpy
@@ -24,12 +24,13 @@
 Requires: whatimage
 Requires: pyheif
 Requires: pymysql
 Requires: pytesseract
 Requires: beautifulsoup4
 Requires: Crypto
 Requires: flask
+Requires: shapely
 
 
     * jokker 常用的功能组成的包
```

## Comparing `JoUtil-1.0.8.dist-info/RECORD` & `JoUtil-1.2.1.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -1,77 +1,84 @@
 JoTools/__init__.py,sha256=v080XclOFSaKDfo1z_cjQd9Uq5QQ2wbqqfFxSkdU-00,235
-JoTools/operateDeteRes.py,sha256=Cu06ExdkBz7zN-HP4Zd5ZE2EE1Ksksvbkv65vE630mk,37262
+JoTools/operateDeteRes.py,sha256=-FnW3q4PCkgYWNVFArUJ9eoQ-juZkKrrTEx63SOLows,40994
 JoTools/for_csdn/find_same_img/find_same_img.py,sha256=OoQW3VG4j62PjorrXTTdxwuKSXcnmbWtHLQJE9siiXs,9076
 JoTools/for_csdn/the_art_of_war/the_art_of_war.py,sha256=rU69uN_XygzaLnbYIIMd9nstUMPtveunuHI290Y3nBo,1787
 JoTools/for_csdn/the_art_of_war/data/the_art_of_war.txt,sha256=F7xLZdvI-CBQNu-_NP2xGXk1gp7uj1WGuDgrytWOZKE,22538
 JoTools/for_csdn/the_art_of_war/data/the_art_of_war_line.txt,sha256=9aJu0vI3ZBY3I-8Bmvq6_fNQjIOli-a__han30TIRyE,22837
+JoTools/for_csdn/word_pic/ucd_say.py,sha256=M0fwMvLJF5s7F1Jzkssn5hpjc-g-1HrkUTgY2P_ihzI,1497
 JoTools/for_csdn/word_pic/word_pic.py,sha256=f3Jei8DDWVMTu3OT7d8qLTxN4_7oCsd0d1_vq9qnFqw,9141
 JoTools/for_csdn/word_pic/data/del.pkl,sha256=IgJwjhHqHFtVWzia2Datpc8Cbt9v5XNnl05euT7QSms,14297050
 JoTools/for_csdn/word_pic/data/word_analysis.pkl,sha256=7zGeZsogljwS4_vpEjXuThdrx4nJmBreFB_HokyKZOo,2532753
 JoTools/for_csdn/word_pic/data/word_analysis_2.pkl,sha256=bFYtS4d9bZvDlB_XtP0_uwCAkEz9CUAZe1kAAjYqjko,2552571
+JoTools/ml/__init__.py,sha256=83-0sT2JweSlm809BHNBvV-RogYuV3Qw_YwjwlgIOHQ,52
+JoTools/ml/deteOnnx.py,sha256=mQ-3Mm5Rv7IDB0VbYCSP5CeLeIOMQj0iLg3dLbCSWPE,10072
 JoTools/txkj/__init__.py,sha256=83-0sT2JweSlm809BHNBvV-RogYuV3Qw_YwjwlgIOHQ,52
 JoTools/txkj/autoPS.py,sha256=tLxa_tZVbifsQntOVkVkai454CG6foLgj478IwpyMEE,6430
 JoTools/txkj/calMap.py,sha256=lMivCLIAswNVLKci6CfOnYsTZSgHnkVJMEd0cud-cqA,157
 JoTools/txkj/calModelAcc.py,sha256=GVeNDPj0isKbRsVngOYhmg51JRecVpr9VDg1jmVQgto,13469
 JoTools/txkj/configUtil.py,sha256=AVYqI-7omT_k3w8w5e-PwtwllqExZSVHHcqro70R9Mc,4371
-JoTools/txkj/driveCudaTorch.py,sha256=dnqpKxQT1kC5BFer6Y9AON-Qbl9qPi_v-k6ZqvRln4Y,2279
+JoTools/txkj/draw_chart.py,sha256=3-0wN1wsER-avpTImcnFbdRJ3VcORm_02W4BzZHkeJg,1131
+JoTools/txkj/driveCudaTorch.py,sha256=MI0Z5ObDyANFvZzJUvjWonsu207f8dKgM4MjVZGVXNs,2419
 JoTools/txkj/eagleUtil.py,sha256=vsr7mDeIfu8eqRmx8OAeLliaw52zPK1h4z6rY8GxVxA,15930
 JoTools/txkj/efficientDetDataset.py,sha256=IQdtcIaHc6FQ6_7vGLQEtVfwe-rjAPLVUSEh66gSJ88,13917
 JoTools/txkj/encryptFile.py,sha256=QRx1XDsvg8dyjUUT4-a6JlF8kUCfS7KlttE0uxPKs6Y,10313
 JoTools/txkj/encryptionModels.py,sha256=H0qVmrW7rlY1M9NwZjnvaaFdjCNVJIV9_L8w8FgH3vU,9671
 JoTools/txkj/fackImg.py,sha256=3JWP__bxI8CQChij1zQJEeXOqb3FCmvZnWV5Jnyrdl0,3076
 JoTools/txkj/findLinesFromPoints.py,sha256=yc-t59I4NMVu__dW2cuxFfavTon7dYc5BThA5WDd6eo,12689
 JoTools/txkj/imageAugmentation.py,sha256=6KqAcZsn179cQpRZzNSNd9JVtCtcJ4HuoP7udX96Rek,8398
+JoTools/txkj/jsonInfo.py,sha256=s5iPeLP1PO79yn8eYG-Vuu5GNtmi3nZ9jyz0x0OVrwA,9410
 JoTools/txkj/parseXml.py,sha256=3bM2ha7xiYIg9VUFiZedRgmWHkqUgbPYJ6MJ3vPgV8c,6552
 JoTools/txkj/segmentAndRegroup.py,sha256=sgTwahX6QYKDA6djFON6cJ1KnRGyQXjJ01LWKu9ikSQ,7343
+JoTools/txkj/ucDatasetOpt.py,sha256=a7uALEJq_4J5SCwzBoq35IMGoZPiBAwqUVzf-iLrGiI,6726
+JoTools/txkj/ucDatasetUtil.py,sha256=KpavTCe65Hk-L2_7hOhOrUK4VLy4FG8Lyge8-8IIR1Q,5410
 JoTools/txkj/ucGenerator.py,sha256=z48VwL324fS8DDoH4wAyC0ytvGIfsUyA76jox-2GcW8,7446
-JoTools/txkj/xml_to_yolo.py,sha256=qOLwO9GxjQUSRMw-7Hj92PDWaMpd89QCA5yx44l4fw4,150
+JoTools/txkj/xml_to_yolo.py,sha256=prr_5awLD3TbWoBHBNrKd0s5vq6xEBBTAthJQ4njoIk,628
 JoTools/txkjRes/AllRes.py,sha256=9qFf8LHid6pavNAVCQA8pFXl5nRzR7Z6ZfBVlxIHjZU,11730
 JoTools/txkjRes/__init__.py,sha256=2-X8FrfpKCxKhIKegBOvJcDBD4vAC_N3kXfRK14Ohyo,353
 JoTools/txkjRes/configOpt.py,sha256=RcCj1bxiUJytYl-gtavXcaQ9qIDhIf-2-RAaUw-a5KQ,447
 JoTools/txkjRes/deteAngleObj.py,sha256=frGmwpTnaP-9PXcs1uGm33fKLOPVz5LUiceMhuKRKw8,5952
 JoTools/txkjRes/deteObj.py,sha256=c4ePOIoV6sHARqhF07e4_YyouW3U8l9NDNoNwVioMrQ,13235
-JoTools/txkjRes/deteRes.py,sha256=4cD6boxgaamuk-Y58ldDFSbXWEqBhqwoF2i4BOmALpA,75787
+JoTools/txkjRes/deteRes.py,sha256=Q6SBqze-oGN5ovpsn_4dR3eAo8E2pIqNZmRtkD05Jvs,79275
 JoTools/txkjRes/deteSegmentObj.py,sha256=rbfbyRUb7ZGLf7iQSZqKCGamiAeAZ3WjOEI46KxN7fg,7181
-JoTools/txkjRes/deteXml.py,sha256=9YvDomzfrEtlY802LaKDM4YhyQ0QcwvRAwOiOhDtkqw,12956
+JoTools/txkjRes/deteXml.py,sha256=_4q2C41LgIQEr9DW-d5rTjAVuXAC-QH0ObutdwpPjrY,13005
 JoTools/txkjRes/lineRes.py,sha256=1vNEH6X6AnIxIMoaPqlez20JMzPkZz39spmNcwND3kE,151
 JoTools/txkjRes/parseJson.py,sha256=YMHmBFUSj6kP0Q6cI-z2_Wiv9q9IgN6xoPcmPn38I5k,2523
 JoTools/txkjRes/pointRes.py,sha256=88e6WHGIyVDIxFnsnimfuJPVO9lvjwZYCk-hBaHbGpA,10124
 JoTools/txkjRes/pointXml.py,sha256=TWpiYZC1u1zqD6eYWZhAmoHeIj1c95Fp_Tw-kXWtluc,99
 JoTools/txkjRes/resBase.py,sha256=EWYRwVkyeN-FJxDyUsGqZDoB0ORiIV8Exi2k0Dr8fXU,4077
-JoTools/txkjRes/resTools.py,sha256=McOGOcJfFDD_wqlI1jHZuvN7MryByHctJU87pQXVI48,5400
+JoTools/txkjRes/resTools.py,sha256=eIfpuLqpILDzB5xkzOE7QO7zUEd1ppN3GqKILW4eCuM,6830
 JoTools/txkjRes/segmentObj.py,sha256=194jA8KVnyKur8c-Xi1fhZITBA6V9nsdOVIr6wnFQT8,1976
 JoTools/txkjRes/segmentRes.py,sha256=NNQv3xWOCkRSPn9Iqs2OQEVRJJ5Go0nzGgy4DKHTz_k,12761
 JoTools/utils/ArgparseUtil.py,sha256=BSUuedC4hfMfoO4F2v4gMtg9eXZBsi1rEJcGQUCE_VU,809
 JoTools/utils/BisectUtil.py,sha256=6u9-Fw8VaJI78SLZJkbP4OpcFuJU-JLFQaOwFuoNROE,883
-JoTools/utils/BlockUtil.py,sha256=S0jn4RA4VHOe0_9gikdx-iLug9OnmGAsyMMts4NqUPU,3863
+JoTools/utils/BlockUtil.py,sha256=frJMANWWreRfQJX4nR-FcxhhRNWjrFwF_-dTc3H_zU8,4063
 JoTools/utils/BytesUtil.py,sha256=yp3Otsnc-5LIyjQSJnMZLGX40FpmMkntpPeMMkrcvso,4623
 JoTools/utils/CompileUtil.py,sha256=Fk48lcVDqww01Vf05nErek4h7rU81GStS2cvT6uJ7Fw,10489
 JoTools/utils/CompressFolderUtil.py,sha256=d0sjd5x66lBOXqF4-sc7As0Tv3x0wj-1salutlhbJFI,4112
 JoTools/utils/ContextManagerUtil.py,sha256=fmInkNpIXsba35FItbzOo9dFYOq5JqzPz1yfPAlyqSY,877
 JoTools/utils/CsvUtil.py,sha256=R2j_rYaClj_MzpfZVw3GaomPb8e_6EG4HfVDZa1mMwA,1489
 JoTools/utils/CtypeUtil.py,sha256=6cz1Huujq95C2sipZgCNTOcx4-UwMBwHQ6-zRhHBO0k,593
 JoTools/utils/DecoratorUtil.py,sha256=QkSLZXXhHam7lTFc2LQH4epSnCmrKO5yzk5IN8LuV4Y,5791
 JoTools/utils/DestructUtil.py,sha256=G322zsrz8KBdbzAgwxOrosPt85LSdVXx0-Zk5-V6lio,2311
 JoTools/utils/EncryptUtil.py,sha256=Em0SEdt39Y9voVr4xxENVBjOh4cn33E8LYlPDWp9dsk,1196
 JoTools/utils/ExternalCommandUtil.py,sha256=5Vody6gpAQPP0eIlsBvqVOHd3YV2yKrWaiX7dPBasMs,587
 JoTools/utils/FTPUtil.py,sha256=1HCw_hLpvIsbz7kXn05ij9kGKhfcL6RESxZejevIdao,4227
-JoTools/utils/FileOperationUtil.py,sha256=Rpm6dZHZ7CSL_n8TqpFvFJoqdOIOYKlEIb1U9Cyy6f4,12647
+JoTools/utils/FileOperationUtil.py,sha256=qd6n2N9uPa5J37kf3eyVjDpsrpciMCwlUYatcDJfVEk,12602
 JoTools/utils/FrameCal.py,sha256=u3_1AwS9xYnFlvoa-YfproyOqBf1WdORtlXNLZJ5unU,1014
 JoTools/utils/GifUtil.py,sha256=LS2M_M3zZBzt4trN3hHLuXLbU7kJrW6etjDKljf6lAA,3116
 JoTools/utils/GitUtil.py,sha256=c3ZF0P5XZyIS3LqayznDdtSdJehRbMd1joLZnAjnXq4,1201
 JoTools/utils/HashImageUtil.py,sha256=5FSWW7DDNyoKmpk-uqTdClFNr6ztuHzvIqLS4jCXkdU,6041
-JoTools/utils/HashlibUtil.py,sha256=gBXrixMlP5OszWzqEVJ-Q0F2tkHDP1UbwzjcE1wtxa0,8212
+JoTools/utils/HashlibUtil.py,sha256=DT8zHrYPadHz7uwAPUzDmwBThPdfo_T8LQfHH05VbcY,8228
 JoTools/utils/ImageMetadataUtil.py,sha256=A04Z6_t8vpNrJQONLctz8k48VuMbM30azs8v3ZymErw,1474
 JoTools/utils/ImageProcessingUtil.py,sha256=ow5OOHnZzfgqu3DJboRdtf_k6Wa_pspjTxPNrDqWirE,12328
 JoTools/utils/ImageUtil.py,sha256=RIreN9tl1_ImVrKw6V3vFFOgqxowelzGh1uAUP4F5uQ,24558
 JoTools/utils/InterpolateUtil.py,sha256=oI-qIr_xChHyHxVQXILHiKcDEy__8x-pyKbNEzhn88g,4345
 JoTools/utils/InterpolationUtil.py,sha256=QDsjib2ZEl6ZJH8OSdM6augS8TareilUNufKqS4E-sU,272
 JoTools/utils/JsonUtil.py,sha256=WL8fzI838NsDX3reVswCJ8ecmJcdyqtS31xSfevm5IU,1158
-JoTools/utils/LivpUtil.py,sha256=fD2fmLxMa2q4v3aXJC9q5DdZj4xZMa-loMZ1WLrl-20,2444
+JoTools/utils/LivpUtil.py,sha256=LcS9f_p7Ygog1uiVEtufnYRU9TXb1ap-atBITPg4aN8,2455
 JoTools/utils/LogUtil.py,sha256=aAgS4CIyYso3PmdIahV4UnzXosRSnCGEDBDkTckAyrw,1664
 JoTools/utils/LyricsUtil.py,sha256=_fhZ8QiqVVl8xWdMOHP9_Kx4V5JYu12L0ELsuPJrmLE,1773
 JoTools/utils/MarkDownUtil.py,sha256=1-GBH9bB8KxBbCH-etw0MeL9FKrDyJRF6g4cUGqxhc4,857
 JoTools/utils/MySqlUtil.py,sha256=vmxCh4XE3kBMeCDSVyjCuL6mRId7-0zPdUXiMTagh_U,5003
 JoTools/utils/NumberUtil.py,sha256=EQiC9W69qLBijHk9VuKkXeZCQkMZv6EYE2zEE8MgZYw,827
 JoTools/utils/OCRUtil.py,sha256=8_uqyCImWieBWC4gzHduPw84C612ZzWKp-s4mvkug3U,1606
 JoTools/utils/PickleUtil.py,sha256=PyQPwyrbrE3fbW5BEWYrCtDIDsHEvyxd8mI4ky9yi_E,664
@@ -80,16 +87,18 @@
 JoTools/utils/PrintUtil.py,sha256=eBXdAfkTvrvvqDHrIWolkFVQhreJ2RSC_40rL50LcIg,1783
 JoTools/utils/PropertiesUtil.py,sha256=TVrezSN4RgSPkVxSAsjwJnuxlHvG07y_-UkXUEdkcT4,1112
 JoTools/utils/RandomUtil.py,sha256=s3N3NHus3bJZDQbbu1AtfH-jurW4dCoKZWImIRxqOf0,1470
 JoTools/utils/RedisUtil.py,sha256=0mtpEnpULX_Wz5Zj7ql6ZUdaHFlvcpQLIkcId3N2dpQ,1504
 JoTools/utils/ScrapyUtil.py,sha256=yk2KnKmwEhvHDEPXKQ2JVNbdVTBMdIbBVL6_rjZo2jE,2625
 JoTools/utils/SplitUtil.py,sha256=eawPO7jLUMG0q--oNag_HBX-KwCBBJKrZREm_z03yZA,1917
 JoTools/utils/StrUtil.py,sha256=RFFLWism-u_zmmFd4i0Vg-yBAOzFICY6QtgInj13AQo,2198
-JoTools/utils/TxtUtil.py,sha256=9ZWW90AIz02dtN2T1TmV62HhEOcjXakATr2rDCo1FwI,1978
+JoTools/utils/TimeUtil.py,sha256=ddE2psXuBQnDUgRw-huUN8tIY72xtQb_oDf0siZiLMs,1119
+JoTools/utils/TxtUtil.py,sha256=EKTG0BAPskgRTvtxuanXrEcCgsl5IhXJsdINsCi9j0Y,1976
 JoTools/utils/VideoUtilCV.py,sha256=NeqoKLJF9Jn1zMuod2LyqCrC9tNR2c9qD_BBUGOMzgk,7922
 JoTools/utils/XmlUtil.py,sha256=Cef9RHgdjhjh374InXb8IjxDpPiAjL2zKESgZKKfSmU,5034
+JoTools/utils/YamlUtil.py,sha256=FS4b3rPAqs303kRt5dK1EeWEip2Zg0RzriGsYJXhHlg,405
 JoTools/utils/ZipUtil.py,sha256=jJUIYu-xfLlVaqefyKLuiGqlM0gl4odA_CfYtMd843o,2614
 JoTools/utils/__init__.py,sha256=83-0sT2JweSlm809BHNBvV-RogYuV3Qw_YwjwlgIOHQ,52
-JoUtil-1.0.8.dist-info/METADATA,sha256=ZYB-lCxzu4VBSBpxPAaOlS0i_ts-2g-aW0GNlGlxbXk,661
-JoUtil-1.0.8.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-JoUtil-1.0.8.dist-info/top_level.txt,sha256=mYulsPmW51C5Ug_dLm2QfDrd9_bQ7f-xEka4ZjNHEFE,157
-JoUtil-1.0.8.dist-info/RECORD,,
+JoUtil-1.2.1.dist-info/METADATA,sha256=Q6FbuslQeOHVIhq5XA3HiPoHDf4XlRpP0vXqPVCcE-U,679
+JoUtil-1.2.1.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+JoUtil-1.2.1.dist-info/top_level.txt,sha256=FAVoqmuyobk4Me6xE5VlG0YVE5Cw4IfI62vAotZ3mKw,168
+JoUtil-1.2.1.dist-info/RECORD,,
```

